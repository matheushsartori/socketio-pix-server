      - name: Deploy with SSH
        run: |
          ssh root@89.116.191.136 '
            if [ ! -d "/opt/socketio-pix/.git" ]; then
              echo "Repositório não encontrado, clonando...";
              git clone https://github.com/matheushsartori/socketio-pix-server.git /opt/socketio-pix;
            fi;

            cd /opt/socketio-pix;
            git config --global --add safe.directory /opt/socketio-pix;
            git pull origin main;
            npm install;

            if ! pm2 describe socketio-pix-server > /dev/null; then
              echo "Processo PM2 \'socketio-pix-server\' não encontrado, iniciando...";
              pm2 start npm --name socketio-pix-server -- start;
            else
              echo "Processo PM2 \'socketio-pix-server\' encontrado, reiniciando...";
              pm2 restart socketio-pix-server;
            fi;
          '
